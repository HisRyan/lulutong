<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>投保信息</title>
    <link rel="stylesheet" href="/css/idMessage.css">
    <script src="/js/ajax.js"></script>
</head>

<body>
    <div class="all">

    </div>
</body>
<script>
    var shopage = getUrlArg();
    var currid = sessionStorage.getItem('id'); //获取session中的数据
    console.log(currid);
    var allDOM = document.querySelector('.all');
    showMessage(currid);

    function showMessage(index) {
        myajax({
            "url": "/php/message.php",
            "arg": {
                "classid": index
            },
            "success": function (re) {
                if (re.state === true) {
                    console.log(re);
                    let tmp = ` <div class="title">
            投保信息
        </div>
        <ul class="content">
            <li>
                <span>畅行无忧${re.data[0].type}卡</span>
                <span>面值${re.data[0].cost}元</span>
            </li>
            <li>
                本卡卡号：${currid}
            </li>
            <li>
                本卡激活日期：${re.datamore[0].createtime}
            </li>
            <li>
                本卡保险生效日期：${re.datamore[0].effecttime}
            </li>
            <li>
                本卡保额信息：
            </li>
            <li>
                交通意外事故、伤残最高保险金额 <span class="money">${re.data[0].accmoney}</span>
            </li>
            <li>
                交通意外医疗最高保险金额 <span class="money">${re.data[0].houmoney}</span>
            </li>
        </ul>

        <div class="person">
            <ul class="sort">
                <li>
                    <p>投保人</p>
                    <div class="hide hide1">
                        <p>投保人姓名
                            <span>${re.datamore[0].tb_name}</span>
                        </p>
                        <p>证件
                            <span>${re.datamore[0].tb_type}</span>
                        </p>
                        <p>证件号码
                            <span>${re.datamore[0].tb_card}</span>
                        </p>
                        <p>性别
                            <span>${re.datamore[0].tb_sex}</span>
                        </p>
                        <p>出生日期
                            <span>${re.datamore[0].tb_birthday}</span>
                        </p>
                        <p>电子邮箱
                            <span>${re.datamore[0].tb_email}</span>
                        </p>
                        <p>手机号
                            <span>${re.datamore[0].tb_phone}</span>
                        </p>
                        <p>地址
                            <span>${re.datamore[0].tb_address}</span>
                        </p>
                    </div>
                </li>
                <li>
                    <p>被保人</p>
                    <div class="hide hide2">
                        <p>投保人姓名
                            <span>${re.datamore[0].bb_name}</span>
                        </p>
                        <p>证件
                            <span>${re.datamore[0].bb_type}</span>
                        </p>
                        <p>证件号码
                            <span>${re.datamore[0].bb_card}</span>
                        </p>
                        <p>性别
                            <span>${re.datamore[0].bb_sex}</span>
                        </p>
                        <p>出生日期
                            <span>${re.datamore[0].bb_birthday}</span>
                        </p>
                        <p>电子邮箱
                            <span>${re.datamore[0].bb_email}</span>
                        </p>
                        <p>手机号
                            <span>${re.datamore[0].bb_phone}</span>
                        </p>
                        <p>地址
                            <span>${re.datamore[0].bb_address}</span>
                        </p>
                    </div>
                </li>
                <li>
                    <p>受益人</p>
                    <div class="hide hide3">
                        <p>投保人姓名
                            <span>111</span>
                        </p>
                        <p>证件
                            <span>222</span>
                        </p>
                        <p>证件号码
                            <span>333</span>
                        </p>
                        <p>性别
                            <span>444</span>
                        </p>
                        <p>出生日期
                            <span>555</span>
                        </p>
                        <p>电子邮箱
                            <span>666</span>
                        </p>
                        <p>手机号
                            <span>777</span>
                        </p>
                        <p>地址
                            <span>888</span>
                        </p>
                    </div>
                </li>
            </ul>
        </div>
        <div class="but more">
            查看理赔信息
        </div>
        <div class="but exit">
            安全退出
        </div>`;
                    allDOM.innerHTML += tmp;
                }
            }
        });
    }










    function getUrlArg() {
        let args = {};
        let url = window.location.href;
        //判断是否有问号
        if (url.includes("?")) {
            let argStr = url.split("?")[1]; //"page=2&pagesize=5"
            let argArr = argStr.split("&"); //["page=2","pagesize=5"]
            for (let i = 0; i < argArr.length; i++) {
                //判断是否有等号
                if (argArr[i].includes("=")) {
                    let argItem = argArr[i].split("=");
                    //判断值是否为空
                    let keyName = argItem[0];
                    let keyValue = argItem[1];
                    args[keyName] = keyValue; //关键语句
                }
            }
        }
        return args;
    }
</script>

</html>