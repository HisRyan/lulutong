<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>阅读条款</title>
    <link rel="stylesheet" href="/css/clause.css" />
    <script src="/js/ajax.js"></script>
  </head>

  <body>
    <div class="wrap">
      <ul class="plan">
        <li>
          <div class="left">1</div>
          <div class="right">卡号密码</div>
        </li>
        <li>
          <div class="left check">2</div>
          <div class="right">阅读条款</div>
        </li>
        <li>
          <div class="left">3</div>
          <div class="right">信息填写</div>
        </li>
        <li>
          <div class="left">4</div>
          <div class="right">完成激活</div>
        </li>
      </ul>
    </div>

    <ul class="content">
      <li>
        <span>畅行无忧<span class="type orange"></span> 卡</span>
        <span>面值<span class="cost orange"></span> 元</span>
      </li>
      <li>注意：18-70岁限激活2份，1-17岁限激活0份</li>
      <li>保额信息</li>
      <li>
        交通意外事故、伤残最高保险金额 <span class="accmoney orange"></span>
      </li>
      <li>交通意外医疗最高保险金额 <span class="houmoney orange">0</span></li>
    </ul>
    <div class="know">
      <p class="title">激活阅读条款</p>
      <div class="con">
        畅行无忧B卡 面值200.00 元 注意：18一70岁限激活2份 1一17岁限激活0份
        保额信息 交通意外身故、伤残最高保险金额 20000.00 元 交通意外医疗保险金额
        2000.00元 激活阅读条款 畅行无忧B卡采用《国寿通泰交通意外伤害保险
        (A款)（2013版）利益条款》、《国寿附加交通泰交
        通意外費用补偿医疗保险利益条款》、《中国人寿
        保险股份有限公司短期保险基本条款》和特别约定条款 投保范围：
        凡年龄在18周岁至70周岁的身体健康者，均可作为被保险人。凡年龄在18周岁至70周岁的身体健康者，均可作为被保险人。凡年龄在18周岁至70周岁的身体健康者，均可作为被保险人。凡年龄在18周岁至70周岁的身体健康者，均可作为被保险人。凡年龄在18周岁至70周岁的身体健康者，均可作为被保险人。
      </div>
    </div>

    <ul class="content">
      <li>保险条款</li>

      <li>
        <input type="checkbox" name="note" id="" onclick="selectmax(this)" />
        <a href="https://m.huize.com/apps/cps/index/product/provision?id=1318"
          >中国人寿保险股份有限公司短期保险基本条款</a
        >
      </li>

      <li>
        <input type="checkbox" name="note" id="" onclick="selectmax(this)" />
        <a href="http://www.iachina.cn/"
          >国泰通泰交通意外伤害保险(A款) (2013版)l利益条款</a
        >
      </li>

      <li>
        <input type="checkbox" name="note" id="" onclick="selectmax(this)" />
        <a href="http://www.iachina.cn/"
          >国泰附加通泰交通意外伤害费用补偿医疗保险利益条款</a
        >
      </li>

      <li>
        <input
          type="checkbox"
          name=""
          id="checkmax"
          onclick="selectall(this)"
        />
        阅读全部保险条款
      </li>
    </ul>

    <div class="next">我已经全部阅读保险条款</div>
    <div class="exit">安全退出</div>
  </body>
  <script>
    function selectall(obj) {
      if (obj.checked) {
        var checkboxs = document.getElementsByName("note");
        for (var i = 0; i < checkboxs.length; i++) {
          checkboxs[i].checked = true;
        }
      } else {
        var checkboxs = document.getElementsByName("note");
        for (var i = 0; i < checkboxs.length; i++) {
          checkboxs[i].checked = false;
        }
      }
    }
    var checkmax = document.querySelector("#checkmax");

    function selectmax(obj) {
      var checkboxs = document.getElementsByName("note");
      console.log(
        checkboxs[0].checked && checkboxs[0].checked && checkboxs[0].checked
      );
      if (
        checkboxs[0].checked &&
        checkboxs[1].checked &&
        checkboxs[2].checked
      ) {
        checkmax.checked = true;
      } else {
        checkmax.checked = false;
      }
    }

    var nextDOM = document.querySelector(".next");
    nextDOM.addEventListener("click", function () {
      if (checkmax.checked) {
        window.location.href = "addid.html";
      } else {
        alert("请阅读全部条款");
      }
    });

    var exitDOM = document.querySelector(".exit");
    exitDOM.addEventListener("click", function () {
      sessionStorage.clear();
      window.location.href = "loginActive.html";
    });

    var typeDOM = document.querySelector(".type");
    var costDOM = document.querySelector(".cost");
    var accmoneyDOM = document.querySelector(".accmoney");
    var houmoneyDOM = document.querySelector(".houmoney");
    //获取session的id值
    var id = sessionStorage.getItem("id");
    //渲染界面
    showcard(id);

    function showcard(index) {
      myajax({
        url: "/php/clause.php",
        arg: {
          id: index,
        },
        success: function (re) {
          typeDOM.textContent = re.data[0].type;
          costDOM.textContent = re.data[0].cost;
          accmoneyDOM.textContent = re.data[0].accmoney;
          houmoneyDOM.textContent = re.data[0].houmoney;
        },
      });
    }
  </script>
</html>
